<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="he">
<head>
    <meta charset="UTF-8">
    <title>ניהול הצעות עזרה</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.rtl.min.css" rel="stylesheet">
</head>
<body dir="rtl">
<div class="container mt-5">
    <h2 class="text-center text-success mb-4">🙌 ניהול הצעות לעזרה</h2>

    <!-- טופס סינון -->
    <form method="get" class="row mb-4">
        <div class="col-md-3">
            <select class="form-select" name="helpType">
                <option value="">-- כל הסוגים --</option>
                <option th:each="t : ${helpTypes}" th:value="${t.name()}" th:text="${t.hebrew}" th:selected="${t == selectedHelpType}"></option>
            </select>
        </div>
        <div class="col-md-3">
            <select class="form-select" name="status">
                <option value="">-- כל הסטטוסים --</option>
                <option th:each="s : ${statuses}" th:value="${s.name()}" th:text="${s}" th:selected="${s == selectedStatus}"></option>
            </select>
        </div>
        <div class="col-md-3">
            <input type="text" name="keyword" class="form-control" placeholder="חיפוש לפי תיאור / מתנדב" th:value="${keyword}">
        </div>
        <div class="col-md-3">
            <button class="btn btn-success w-100">🔍 סנן</button>
        </div>
    </form>

    <!-- טבלת הצעות -->
    <table class="table table-striped text-center align-middle">
        <thead class="table-dark">
        <tr>
            <th>ID</th>
            <th>מתנדב</th>
            <th>סוג עזרה</th>
            <th>אזור</th>
            <th>ימים</th>
            <th>שעות</th>
            <th>תיאור</th>
            <th>סטטוס</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="offer : ${offers}">
            <td th:text="${offer.id}"></td>
            <td th:text="${offer.user.fullName}"></td>
            <td th:text="${offer.helpType.hebrew}"></td>
            <td>
        <span th:each="r, stat : ${offer.regions}">
          <span th:text="${r.hebrew}"></span><span th:if="${!stat.last}">, </span>
        </span>
            </td>
            <td>
        <span th:each="d, stat : ${offer.daysAvailable}">
          <span th:text="${d.hebrew}"></span><span th:if="${!stat.last}">, </span>
        </span>
            </td>
            <td>
        <span th:each="t, stat : ${offer.timeSlots}">
          <span th:text="${t.hebrew}"></span><span th:if="${!stat.last}">, </span>
        </span>
            </td>
            <td th:text="${offer.description}"></td>
            <td th:text="${offer.status}"></td>
        </tr>
        </tbody>
    </table>

    <div class="text-center mt-4">
        <a href="/admin/home" class="btn btn-outline-secondary">⬅ חזרה לדף הראשי</a>
    </div>
</div>
</body>
</html>
